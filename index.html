<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gift Name Shuffler</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Gift Name Shuffler</h1>
        <p>Organize Secret Santa and gift exchanges easily!</p>
    </header>

    <main>
        <!-- Section 1: Manage Persons -->
        <section id="persons-section" class="card">
            <h2>Persons</h2>
            <div class="form-row">
                <input type="text" id="person-name" placeholder="Person name">
                <select id="person-group">
                    <option value="">-- No group --</option>
                </select>
                <button onclick="addPerson()">Add Person</button>
            </div>
            <ul id="persons-list"></ul>
        </section>

        <!-- Section 2: Manage Groups -->
        <section id="groups-section" class="card">
            <h2>Groups</h2>
            <div class="form-row">
                <input type="text" id="group-name" placeholder="Group name">
                <button onclick="addGroup()">Add Group</button>
            </div>
            <div id="groups-container"></div>
        </section>

        <!-- Section 3: Manage Occasions -->
        <section id="occasions-section" class="card">
            <h2>Occasions</h2>
            <div class="form-row">
                <input type="text" id="occasion-name" placeholder="Occasion name (e.g., Christmas 2025)">
                <input type="date" id="occasion-date">
                <button onclick="addOccasion()">Add Occasion</button>
            </div>
            <ul id="occasions-list"></ul>
        </section>

        <!-- Section 4: Shuffle & Assignments -->
        <section id="shuffle-section" class="card">
            <h2>Shuffle &amp; Assignments</h2>
            <p class="info-text">Shuffles all persons. Each person is assigned someone from a <strong>different</strong> group.</p>
            <div class="form-row">
                <label for="select-occasion">Occasion:</label>
                <select id="select-occasion" onchange="updateEditionsList()">
                    <option value="">-- Select Occasion --</option>
                </select>
            </div>
            <div class="form-row checkbox-row">
                <label>
                    <input type="checkbox" id="prevent-reciprocal" checked>
                    Prevent reciprocal gifts (if A → B, then B cannot → A)
                </label>
            </div>
            <div class="form-row">
                <button onclick="runShuffle()" class="primary-btn">Run Shuffle (Create New Edition)</button>
            </div>

            <!-- Hidden exclusions/inclusions feature -->
            <details class="advanced-settings">
                <summary>Advanced: Rules</summary>

                <h4>Exclusions (Cannot give to)</h4>
                <p class="help-text">Pairs who should NOT be assigned to each other (e.g., couples, roommates).</p>
                <div class="form-row">
                    <select id="exclusion-person1">
                        <option value="">-- Person 1 --</option>
                    </select>
                    <span class="rule-arrow">↔</span>
                    <select id="exclusion-person2">
                        <option value="">-- Person 2 --</option>
                    </select>
                    <button onclick="addExclusion()">Add</button>
                </div>
                <ul id="exclusions-list"></ul>

                <h4>Inclusions (Must give to)</h4>
                <p class="help-text">Force a specific person to give to another (one-way).</p>
                <div class="form-row">
                    <select id="inclusion-giver">
                        <option value="">-- Giver --</option>
                    </select>
                    <span class="rule-arrow">→</span>
                    <select id="inclusion-recipient">
                        <option value="">-- Recipient --</option>
                    </select>
                    <button onclick="addInclusion()">Add</button>
                </div>
                <ul id="inclusions-list"></ul>
            </details>

            <div id="editions-container">
                <h3>Editions</h3>
                <select id="select-edition" onchange="showAssignments()">
                    <option value="">-- Select Edition --</option>
                </select>
            </div>

            <div id="assignments-container">
                <h3>Assignments</h3>
                <ul id="assignments-list"></ul>
            </div>
        </section>

        <!-- Section 5: Share Data -->
        <section id="share-section" class="card">
            <h2>Share Data</h2>
            <p>Export your data to share with others, or import data from someone else.</p>
            <div class="form-row">
                <button onclick="exportDataJSON()">Export Data (.json)</button>
                <button onclick="document.getElementById('import-file').click()">Import Data (.json)</button>
                <input type="file" id="import-file" accept=".json" onchange="importDataJSON(event)" style="display: none;">
            </div>
        </section>

        <!-- Section 6: Export RDF -->
        <section id="export-section" class="card">
            <h2>Export as RDF</h2>
            <div class="form-row">
                <button onclick="exportAsTurtle()">Export as Turtle (.ttl)</button>
                <button onclick="downloadTurtle()">Download .ttl File</button>
            </div>
            <textarea id="export-output" placeholder="Turtle output will appear here..."></textarea>
        </section>

        <!-- Section 6: Reset -->
        <section id="reset-section" class="card danger">
            <h2>Reset Data</h2>
            <p>This will permanently delete all data stored in this browser.</p>
            <button onclick="resetAllData()" class="danger-btn">Reset All Data</button>
        </section>
    </main>

    <footer>
        <p>Gift Name Shuffler &mdash; A simple static web app for organizing gift exchanges.</p>
    </footer>

    <script src="main.js"></script>
    <script src="export.js"></script>
</body>
</html>
